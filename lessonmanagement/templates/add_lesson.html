{% extends 'base_withsidebar.html' %}

{% block content %}
{% with teacher=request.user.teacher %}
{% load lessonmanagement_extras %}

<div class="bg-white border shadow-sm p-3 rounded-pill mb-4">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb m-0 ">
        <li class="breadcrumb-item"><a href="{% url 'index' %}" class="text-decoration-none"><i class="fas fa-home me-2"></i>Trang chủ</a></li>
        <li class="breadcrumb-item"> <a href="{% url 'alllessons' %}" class="text-decoration-none">Giáo án</a></li>
        <li class="breadcrumb-item active" aria-current="page">Thêm Giáo án</li>
      </ol>
    </nav>
  </div>

  <h5>Chọn môn học mà bạn muốn thêm giáo án </h5>
  <small class="text-muted">Danh sách này hiển thị dựa theo sự phân công giảng dạy của nhà trường tuỳ theo từng niên khoá </small>
 
  <hr>

 
  {% regroup teacher.subject_classyeartitle_list by subject__title as subject_classyeartitle_list_regroup %}

  

  {% for i in subject_classyeartitle_list_regroup %}

  

  <div class="row">

    <h6>{{ i.grouper }}</h6>

    {% regroup i.list by classyear__startyear as i_list_regroup %}
     
    {% for j in i_list_regroup %}
  

    
    <div class="col-4 my-3">
        <div class="card rounded-15 shadow h-100">
            <div class="card-body d-flex flex-column  ">
              <h5 class="card-title"><i class="fas fa-book fa-fw me-2"></i> {{ i.grouper }} {{ j.grouper|classlevel }}</h5>
              <hr>
                <p class="card-text m-0">

                    <dl class="row">
                        <dt class="col-sm-5">Description lists</dt>
                        <dd class="col-sm-7">A description list is perfect for defining terms.</dd>
                    </dl>

                <ul>
                    <li>Bộ môn <a href="#" class="text-decoration-none">{{ j.list.0.subject__group__title }}</a></li>
                    <li>Giáo viên <a href="#" class="text-decoration-none">{{ teacher.full_name }}</a></li>
                    <li>Dạy các lớp
                      <ul>
                          {% for k in j.list %}
                        <li>{{ k.classyear__startyear|classlevel }}{{ k.classyear__title }}</li>
                        {% endfor %}
                      </ul>
                    </li>
                    <li>This may still come in handy in some situations.</li>
                  </ul>
                </p>


              <a href="#" class="btn btn-outline-success mt-auto">Thêm giáo án</a>
            </div>
          </div>

      </div>

      {% endfor %}


   

  </div>


  <hr>
  {% endfor %}


     
   


  

  {% endwith %}

{% endblock %}