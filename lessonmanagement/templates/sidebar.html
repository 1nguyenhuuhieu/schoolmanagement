{% load lessonmanagement_extras %}
{% with teacher=request.user.teacher %}
<div class="position-sticky top-0 start-0 pt-4">
  <div class="d-flex justify-content-between mb-4 align-items-center">
    <h3>Giáo án</h3>
    <div class="btn-group">
      <a href="{% url 'addlesson' %}" class="btn btn-sm btn-success"><i class="fas fa-plus me-2"></i>Thêm giáo án</a>
      <button type="button" class="btn btn-sm btn-success dropdown-toggle dropdown-toggle-split"
        data-bs-toggle="dropdown" aria-expanded="false">
        <span class="visually-hidden">Toggle Dropdown</span>
      </button>
      <ul class="dropdown-menu dropdown-menu-end ">
        <li><h6 class="dropdown-header">Thêm giáo án vào môn <i class="fas fa-angle-down ms-1"></i></h6></li>
        <li>
          <hr class="dropdown-divider">
        </li>
        {% for i in teacher.subject_classyear_list %}
        <li><a class="dropdown-item" href="#">{{ i.subject__subject__title }} {{i.classyear__startyear__start_date__year|classlevel}} </a></li>
        {% endfor %}
      </ul>
    </div>
  </div>
  <div class="input-group input-group-sm mb-3">
    <input type="search" class="form-control " list="datalistOptions" id="quicksearch"
      placeholder="Tìm giáo án nhanh..." aria-describedby="button-addon2" name="search">
    <datalist id="datalistOptions">
      {% for lesson in teacher.lesson_list %}
      <option value="{{ lesson.title }}">{{ lesson.subject.title }} {{ lesson.level }}</option>
      {% endfor %}
    </datalist>
    <a href="" class="btn border" id="button-addon2"><i class="fas fa-arrow-right"></i></a>
  </div>
  <a href="{% url 'alllessons' %}" class="btn  btn-success w-100"><i class="fas fa-archive me-2"></i>Thư viện giáo án
  </a>
  <div class="list-group">
    <hr>
    <!-- Giáo án năm học này -->
    {% now "m" as current_month %}
    {% now "Y" as current_year %}
    <span class="fw-bold mb-3">Giáo án năm {{ teacher.schoolyear }} </span>
    <a href="{% url 'lessondashboard' %}"
      class="list-group-item list-group-item-action border-0 text-primary ps-0 {% if request.path == '/lessondashboard/' %} fw-bold {% endif %}"><i
        class="fas fa-chart-bar me-2 text-muted  fa-fw "></i>Thống Kê</a>
    {% for i in teacher.subject_classyear_list %}
    <a href="{%url 'lessons_subject_level' i.subject__subject__title|slugify 6%}"
      class="list-group-item list-group-item-action border-0 text-primary ps-0"><i
        class="fas fa-book fa-fw me-2 text-muted"></i>{{i.subject__subject__title}} {{i.classyear__startyear__start_date__year|classlevel}} </a>
    {% endfor %}
    <hr>
    <span class="fw-bold mb-3"><i class="far fa-lightbulb me-2"></i>Bạn muốn xem các giáo án cũ hơn?</span>
    <p class="text-muted pe-3">Hệ thống lưu trữ toàn bộ các giáo án bạn đã tải lên. Đến thư viện giáo án và tìm lại.</p>
  </div>
</div>
{% endwith %}